#!/usr/bin/env bash

PYTHON=python3

PROJECT_NAME=$(basename $(realpath .))
VENV_BASE=.venv
VENV_DIR=$VENV_BASE/$PROJECT_NAME

if [ -d $VENV_BASE ]
then
  echo $VENV_BASE/ already exists. >&2
  exit 1
fi

$PYTHON -m venv $VENV_DIR

echo . $VENV_DIR/bin/activate >> .envrc && direnv allow
$PYTHON -V
