" vim: set ft=vim:

"===================="
" plugins
"===================="
" How to setup plugins
  " cd ~/.vimperator
  " mkdir plugin
  " downloaded plugins put into the 'plugin' dir

" _libly.js
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/_libly.js
"
" caret-hint.js
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/caret-hint.js
"
" copy.js
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/copy.js
"
" walk-input.js
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/walk-input.js
"
" lookupDictionary.js
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/lookupDictionary.js
"
" auto_detect_links.js
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/auto_detect_link.js
"
" auto-focus-frame.js
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/auto-focus-frame.js
"
" opener.js
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/opener.js
"
" twitperator.js
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/twittperator.js
"
" fourcefocuscontent.js
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/forcefocuscontent.js
"
" goo.gl
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/goo.gl.js
"
" google tasks
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/google-tasks.js
"
" image extender
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/imageextender.js
"
" zoom
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/zoom-em-all.js
"
" amazon short url
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/amazon_simple_uri.js
"
" account switcher
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/account_switcher.js
"
" plugin manager
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/pluginManager.js
"
" append ancher
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/appendAnchor.js
"
" higemo hint
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/migemo_hint.js
"
" migemized find
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/migemized_find.js
"
" migemo find
" https://raw.githubusercontent.com/vimpr/vimperator-plugins/master/migemo-find.js

"===================="
" colorscheme
"===================="

" download colorscheme files first
" git clone https://github.com/vimpr/vimperator-colors.git ~/.vimperator/colors

" colorscheme simple
colorscheme indigo-fx3

"===================="
" general
"===================="

" ビジュアルベルを表示しない
set visualbell
highlight Bell display:none

" コマンドラインモード時に自動でIMEをOFFにする
" 参考ページ http://vimperator.g.hatena.ne.jp/teramako/20090311/1236776437
style -name commandline-ime chrome://* #liberator-commandline-command input {ime-mode: inactive;}

" 次のページを検索するマッチキャラクタを追加
" http://umeji.blogspot.jp/2008/05/vimperatornextpattern.html
" set nextpattern=\bnext\b,\bmore\b,next,^次(の)?ページ,\b次.*,→\b,^>$,^(>>|≫)$,^(>|≫),(>|≫)$
" set previouspattern=\bprev|previous\b,prev,^前(の)?ページ,\b前.*,\b←,^<$,^(<<|≪)$,^(<|≪),(<|≪)$

" ツールバーはアドオンとタブのみ表示
set gui=addons,nobookmarks,nomenu,nonavigation,tabs

" ステータスバーにSSL表示を追加
set status=ssl,input,location,bookmark,history,tabcount,position

" R で.vimperatorrcを再読込み
map R :source ~/.vimperatorrc<CR>

" full screen でも statusline を表示
set statuslinevisibility=visible

" 入力欄に自動フォーカスしない
set focuscontent

"===================="
" mappings
"===================="

"j/kの移動量を5倍に変更
nnoremap j 5j
nnoremap k 5k

" ヒントメッセージを変更
set hintchars='abcdefghijklmnopqrstuvwxyz234567890;,.[]-/\'
" set hintmatching=custom

" google検索を手早くする
noremap s :open<Space>google<Space>
noremap S :tabopen<Space>google<Space>

" undo一覧から開く
nnoremap U :undo<Space>

" hlsearchを消す
nnoremap <silent> <C-l> :<C-u>nohlsearch<CR>

" タブグループ関連
" http://jagua.hatenablog.jp/entry/2012/12/08/001014
" :panorama のサブコマンドを入力待ち
nnoremap <Leader>gc :<C-u>panorama<Space>
" タブグループを移動
nnoremap <Leader>gs :<C-u>panorama switch<Space>
" タブグループを新規作成
nnoremap <Leader>ga :<C-u>panorama add<Space>
" タブグループリストを表示
nnoremap <Leader>gl :<C-u>panorama list<CR>
" 現在のタブをタブグループに追加
nnoremap <Leader>gp :<C-u>panorama pushtab<Space>
" 現在のタブグループにタブを追加
nnoremap <Leader>gu :<C-u>panorama pulltab<Space>
" タブグループを削除
nnoremap <Leader>gr :<C-u>panorama remove<Space>
" タブグループビューを開く
nnoremap <Leader>go <C-S-e>

"Backspaceを無効化する。
map <BS> ""

" @でタブのピン留めをトグル
javascript <<EOM
liberator.modules.commands.addUserCommand(["togglepin"], "add pin to current tab",
function(){
  var currentTab = gBrowser.mCurrentTab
  if(currentTab.pinned){
    gBrowser.unpinTab(currentTab)
  }
  else{
   gBrowser.pinTab(currentTab)
  }
});
EOM
nnoremap @ :togglepin <CR>

"============================
" ignorekeys
"============================

ignorekeys clear
" ignorekeys add https://docs\\.google\\.com

"============================
" copy.js
"============================

let g:caret_hint_swap_key = 'o'


"============================
" copy.js
"============================

javascript <<EOM
  liberator.globalVariables.copy_templates = [
    { label: 'title', value: '%TITLE%' },
    { label: 'plain', value: '%TITLE% %URL%' },
    { label: 'anchor', value: '<a href="%URL%">%TITLE%</a>' },
    { label: 'markdown', value: '[%TITLE%](%URL%)' },
    { label: 'confluencewiki', value: '[%TITLE%|%URL%]' },
  ];
EOM

"============================
" open in chrome
"============================

js <<EOM
liberator.modules.commands.addUserCommand(["OpenInChrome"], 'Open URL In Chrome',
  function(){
    if(liberator.has("MacUnix")){
      io.system('open -a "/Applications/Google\ Chrome.app" ' + "'"+ buffer.URL + "'");
    }
  },{}
);
EOM
nnoremap ,c :OpenInChrome <CR>

"読み込み完了メッセージ
echo "vimperatorrc loaded."
